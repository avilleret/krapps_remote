#N canvas 550 153 1257 631 10;
#X obj 178 77 ctlin;
#X obj 165 549 ctlout;
#N canvas 108 608 531 329 count-devices 0;
#X obj 88 207 route float;
#X obj 88 167 route devicelist;
#X obj 88 187 route out;
#X obj 88 15 loadbang;
#X obj 88 247 outlet;
#X msg 175 253 found \$1 MIDI out devices;
#X obj 175 275 print -n;
#X obj 88 37 delay 1000;
#X obj 88 147 midisettings;
#X obj 88 59 t b b b;
#X msg 11 96 listdevices;
#X msg 134 81 device @in 1 2 3 4 @out 1 2 3 4;
#X msg 111 106 \; pd midi-dialog 1 2 3 4 1 2 3 4 2 2;
#X obj 164 38 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X connect 0 0 4 0;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 7 0;
#X connect 5 0 6 0;
#X connect 7 0 9 0;
#X connect 8 0 1 0;
#X connect 9 0 10 0;
#X connect 9 1 12 0;
#X connect 9 2 11 0;
#X connect 10 0 8 0;
#X connect 11 0 8 0;
#X connect 13 0 9 0;
#X restore 316 301 pd count-devices;
#N canvas 643 401 546 461 repeatOnOtherDevice 0;
#X obj 78 56 inlet;
#X obj 324 56 inlet;
#X text 366 57 nombre de sorties midi;
#X text 120 56 message midi à répéter;
#X text 88 76 list : VAL CC CH;
#X obj 110 143 unpack 0 0 0;
#X obj 110 398 pack 0 0 0;
#X obj 58 220 until;
#X obj 58 195 f;
#X obj 324 78 t f f;
#X obj 294 148 - 1;
#X obj 190 288 + 16;
#X obj 160 288 f 1;
#X obj 177 351 %;
#X obj 356 223 * 16;
#X obj 58 242 t b b;
#X obj 102 327 f;
#X obj 78 118 t b a b;
#X obj 177 330 +;
#X obj 110 420 outlet;
#X msg 178 232 16;
#X obj 177 373 + 1;
#X obj 195 196 - 1;
#X connect 0 0 17 0;
#X connect 1 0 9 0;
#X connect 5 0 16 1;
#X connect 5 1 6 1;
#X connect 5 2 22 0;
#X connect 6 0 19 0;
#X connect 7 0 15 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 9 1 14 0;
#X connect 10 0 8 1;
#X connect 11 0 12 1;
#X connect 12 0 11 0;
#X connect 12 0 18 0;
#X connect 13 0 21 0;
#X connect 14 0 13 1;
#X connect 15 0 16 0;
#X connect 15 1 12 0;
#X connect 16 0 6 0;
#X connect 17 0 8 0;
#X connect 17 1 5 0;
#X connect 17 2 20 0;
#X connect 18 0 13 0;
#X connect 20 0 12 1;
#X connect 21 0 6 2;
#X connect 22 0 18 1;
#X restore 165 350 pd repeatOnOtherDevice;
#N canvas 1 88 588 300 threshold 0;
#X obj 246 107 > 30;
#X obj 246 129 * 64;
#X text -106 107 filtre de pression \, on ignore les petites frappes
;
#X text -134 128 si la pression dépasse le seuil \, on envoie 64 sinon
0;
#X obj 246 151 change;
#X text -169 152 trigger de shmidt : on ne renvoie pas la valeur tant
qu'on n'est pas redescendu en dessous du seuil;
#X obj 246 36 inlet;
#X obj 246 213 outlet;
#X obj 246 58 unpack 0 0 0;
#X obj 246 193 pack 0 0 0;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 4 0 9 0;
#X connect 6 0 8 0;
#X connect 8 0 0 0;
#X connect 8 1 9 1;
#X connect 8 2 9 2;
#X connect 9 0 7 0;
#X restore 165 267 pd threshold;
#X obj 165 145 pack 0 0 0;
#X obj 165 502 unpack 0 0 0;
#X text 227 104 on reçoit tous les controleurs MIDI \, sur tous les
canaux;
#X text 252 120 canaux 1 à 16 : interface MIDI n°1;
#X text 252 135 canaux 17 à 32 : interface MIDI n°2;
#X text 267 150 et ainsi de suite;
#X floatatom 316 327 5 0 0 0 numOUTs - -, f 5;
#X text 355 327 nombre de sorties MIDI;
#X text 258 268 on seuil la valeur du controleur pour n'envoyer que
2 valeurs : 0 ou 64;
#X text 324 353 on répète le messages sur toutes les autres interfaces
;
#X text 240 212 simulation de la réception du controleur 7 sur le
canal 1;
#X msg 186 211 \$1 7 1;
#X obj 189 187 hsl 128 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 197 433 spigot;
#X obj 197 475 print MIDIsend;
#X obj 236 412 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 253 412 coche pour monitorer dans la console PD les messages
envoyés;
#X msg 197 455 controleur MIDI #\$2 valeur \$1 canal \$3;
#N canvas 639 409 546 461 sendToAllDevices 0;
#X obj 78 56 inlet;
#X obj 324 56 inlet;
#X text 366 57 nombre de sorties midi;
#X text 120 56 message midi à répéter;
#X text 88 76 list : VAL CC CH;
#X obj 110 398 pack 0 0 0;
#X obj 58 220 until;
#X obj 58 195 f;
#X obj 210 288 + 16;
#X obj 180 288 f 1;
#X obj 58 242 t b b;
#X obj 102 327 f;
#X obj 78 118 t b a b;
#X obj 110 420 outlet;
#X obj 180 332 +;
#X obj 110 143 unpack 0 0 0;
#X msg 198 242 1;
#X connect 0 0 12 0;
#X connect 1 0 7 1;
#X connect 5 0 13 0;
#X connect 6 0 10 0;
#X connect 7 0 6 0;
#X connect 8 0 9 1;
#X connect 9 0 8 0;
#X connect 9 0 14 0;
#X connect 10 0 11 0;
#X connect 10 1 9 0;
#X connect 11 0 5 0;
#X connect 12 0 7 0;
#X connect 12 1 15 0;
#X connect 12 2 16 0;
#X connect 14 0 5 2;
#X connect 15 0 11 1;
#X connect 15 1 5 1;
#X connect 15 2 14 1;
#X connect 16 0 9 1;
#X restore -5 350 pd sendToAllDevices;
#X obj 165 399 t a a;
#N canvas 595 406 726 392 keyboard 0;
#X obj 11 322 outlet;
#X obj 44 191 % 128;
#X obj 44 162 t f f;
#X obj 109 196 / 128;
#X obj 109 218 int;
#X text 153 194 les valeurs de touches vont de 0 à 255 alors que les
controleur MIDI ne vont que jusqu'à 127 Donc les touches avec une
valeur supérieur à 127 sont envoyé sur le canal 2;
#X obj 11 39 hid/hid;
#X obj 11 -21 loadbang;
#X msg 11 1 open 0 \, 1 \, linux_code_mode 1;
#X obj 11 61 route key;
#X obj 11 269 pack 0 0 0;
#X obj 11 103 unpack;
#X msg 11 83 \$2 \$1;
#X obj 11 125 > 0;
#X obj -12 166 * 127;
#X obj -12 188 change;
#X text 104 36 converti les numéros de touches en controleur avec
valeur 0 ou 127;
#X connect 1 0 10 1;
#X connect 2 0 1 0;
#X connect 2 1 3 0;
#X connect 3 0 4 0;
#X connect 4 0 10 2;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 9 0 12 0;
#X connect 10 0 0 0;
#X connect 11 0 13 0;
#X connect 11 1 2 0;
#X connect 12 0 11 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 10 0;
#X restore -5 324 pd keyboard;
#X obj 235 382 loadbang;
#X obj 757 205 cnv 15 100 60 empty empty empty 20 12 0 14 -261682 -66577
0;
#N canvas 509 295 620 300 README 0;
#X text 126 37 pour essayer le patch sous Mac OS avec Pd-extended :
;
#X text 158 65 1- vérifier dans la configuration MIDI si toutes les
interfaces sont sélectionnées en entrée et en sortie;
#X text 158 99 2- renseigner le nombres de sorties MIDI dans la boite
"numOUTs";
#X text 159 132 3- cliquer sur le;
#X obj 289 132 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 309 132 pour activer l'affichage dans la console Pd;
#X text 161 155 4- soit rentrer des valeurs à la souris avec le slider
\, soit envoyer des control change depuis un controleur MIDI.;
#X text 161 211 Des messages doivent apapraitre dans la console de
Pd à chaque message MIDI envoyé.;
#X restore 777 239 pd README;
#N canvas 1 97 735 300 quit 0;
#X obj 63 80 netreceive 3000;
#X obj 63 124 t b;
#X msg 63 146 quit;
#X obj 63 102 route quit;
#X obj 63 208 s pd;
#X obj 63 168 t a a;
#X text 238 68 ce petit bout de patch permet de fermer proprement Pd
depuis la ligne de commande :;
#X text 267 101 echo "quit \; " | pdsend 3000;
#X msg 118 198 receive quit signal from network;
#X obj 118 229 print -n;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 5 0 4 0;
#X connect 5 1 8 0;
#X connect 8 0 9 0;
#X restore 799 370 pd quit;
#X connect 0 0 5 0;
#X connect 0 1 5 1;
#X connect 0 2 5 2;
#X connect 2 0 11 0;
#X connect 3 0 24 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 6 0 1 0;
#X connect 6 1 1 1;
#X connect 6 2 1 2;
#X connect 11 0 3 1;
#X connect 11 0 23 1;
#X connect 16 0 4 0;
#X connect 17 0 16 0;
#X connect 18 0 22 0;
#X connect 20 0 18 1;
#X connect 22 0 19 0;
#X connect 23 0 24 0;
#X connect 24 0 6 0;
#X connect 24 1 18 0;
#X connect 25 0 23 0;
#X connect 26 0 20 0;
